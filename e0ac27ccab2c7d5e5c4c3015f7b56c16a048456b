{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5c9eecc3_c1832722",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2021-06-22T14:41:16Z",
      "side": 1,
      "message": "I\u0027m not totally sure why this is needed - we already pass configuration files which sets the full storage configuration.",
      "revId": "e0ac27ccab2c7d5e5c4c3015f7b56c16a048456b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6e3320e5_2f1d1534",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1014216
      },
      "writtenOn": "2021-06-23T06:44:50Z",
      "side": 1,
      "message": "The storage-config file is added to overcloud_deploy.sh script in the backend tasks (ceph.yml, swift.yml, netapp.yml). In case we need two backends ceph internal and netapp external, two files are required internal.yaml and another configuration file for netapp.\nThe existing code does not allow this.\nI suggested this change because I didn\u0027t want to change the existing code to avoid problems.\n\nThere is another option that I think is preferable.\nWe can separate the storage-config task and move it under storage/main.yml.\nThere will be one condition for running the task only that the file is provided.\n\nWhat do you think ?",
      "parentUuid": "5c9eecc3_c1832722",
      "revId": "e0ac27ccab2c7d5e5c4c3015f7b56c16a048456b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3e4f815e_82273db7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2021-06-23T12:19:27Z",
      "side": 1,
      "message": "and can\u0027t you pass the parameter to configure ceph through the yaml configuration file, just like you set the manila parameters?",
      "parentUuid": "6e3320e5_2f1d1534",
      "revId": "e0ac27ccab2c7d5e5c4c3015f7b56c16a048456b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9ade5566_5eac44ff",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1014216
      },
      "writtenOn": "2021-06-23T12:52:39Z",
      "side": 1,
      "message": "Do you mean to include the content of internal.yaml ?\nThis is j2 template, so I don\u0027t think so.",
      "parentUuid": "3e4f815e_82273db7",
      "revId": "e0ac27ccab2c7d5e5c4c3015f7b56c16a048456b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "820f6978_c4aa6892",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2021-06-23T13:05:45Z",
      "side": 1,
      "message": "Yes, it\u0027s possible. Of course you can\u0027t use the template. But the template expands to a yaml file of parameter_defaults item. You just need to set the ones you need in your configuration file.\n\nThe problem is these storage tasks of the tripleo-overcloud infrared plugins conflates two tasks:\n- the configuration of ceph deployed by tripleo \n- the configuration of some services to use that ceph, or an external ceph\n\nAs long as the two settings are mixed, thje only solution is to set the required settings in your private configuration files (the need for untangling them without adding more cruft is the reason why I voted -2 on the previous proposal)",
      "parentUuid": "9ade5566_5eac44ff",
      "revId": "e0ac27ccab2c7d5e5c4c3015f7b56c16a048456b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e6888b58_d4e34609",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1014216
      },
      "writtenOn": "2021-06-27T08:20:25Z",
      "side": 1,
      "message": "The current code failed to copy the storage configuration file in ceph.yml\nAs I suggested, let\u0027s separate the storage-config task and move it under storage/main.yml.",
      "parentUuid": "820f6978_c4aa6892",
      "revId": "e0ac27ccab2c7d5e5c4c3015f7b56c16a048456b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "854cdd5b_52ceb9a9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2021-06-28T08:20:51Z",
      "side": 1,
      "message": "Moving that task to its own place is part of the big refactoring, as it means removing that code from all the tasks/storage/*.yml files. Do you have a draft patch that doesn\u0027t break the existing users?",
      "parentUuid": "e6888b58_d4e34609",
      "revId": "e0ac27ccab2c7d5e5c4c3015f7b56c16a048456b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dfa3d7a7_2989d72b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1014216
      },
      "writtenOn": "2021-06-28T09:37:49Z",
      "side": 1,
      "message": "It is located in only three places.\nAll the idea is to separated it from the tasks of the specific backend.\nAnd in case it\u0027s provided, call the required yaml file.\nIt works from me and I don\u0027t think it breaks the existing users, but it is impossible to really know.",
      "parentUuid": "854cdd5b_52ceb9a9",
      "revId": "e0ac27ccab2c7d5e5c4c3015f7b56c16a048456b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}