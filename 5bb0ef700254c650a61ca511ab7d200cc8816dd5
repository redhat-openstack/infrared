{
  "comments": [
    {
      "key": {
        "uuid": "1952c31b_0451a57e",
        "filename": "plugins/openstack/post.yml",
        "patchSetId": 4
      },
      "lineNbr": 12,
      "author": {
        "id": 1010634
      },
      "writtenOn": "2017-09-22T09:23:14Z",
      "side": 1,
      "message": "small delay + timeout is a bad approach to this as the port may be open but loggin in still forbidden (for whatever reason - i.e.: some services still starting), I would take a different approach, i.e.: https://review.gerrithub.io/#/c/367359/",
      "range": {
        "startLine": 11,
        "startChar": 3,
        "endLine": 12,
        "endChar": 24
      },
      "revId": "5bb0ef700254c650a61ca511ab7d200cc8816dd5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c8b1cf5a_2fe8e803",
        "filename": "plugins/openstack/post.yml",
        "patchSetId": 4
      },
      "lineNbr": 12,
      "author": {
        "id": 1008329
      },
      "writtenOn": "2017-09-22T09:49:29Z",
      "side": 1,
      "message": "I think you you didn\u0027t really get it: that\u0027s exactly what it happens: when you SSH too quickly after provisioning you may get an access forbidden error even when you do have the right credentials, just behave SSH system didn\u0027t had time to start properly. \n\nThere is no way to know if this error is genuine or is due to timing, so retry is the only way to do it. \n\nI am open to consider any proposal for number of retries and delay between them, as long there are at least two attempts. My impression is that the window of error is very small, probably under 10s.\n\nAnyway I do not see it as a problem to add *up to* 100s delay when create instance fails, that\u0027s nothing as it delays only failures, not real execution.",
      "parentUuid": "1952c31b_0451a57e",
      "range": {
        "startLine": 11,
        "startChar": 3,
        "endLine": 12,
        "endChar": 24
      },
      "revId": "5bb0ef700254c650a61ca511ab7d200cc8816dd5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "729da2fd_17f5651a",
        "filename": "plugins/openstack/post.yml",
        "patchSetId": 4
      },
      "lineNbr": 26,
      "author": {
        "id": 1010634
      },
      "writtenOn": "2017-09-22T09:23:14Z",
      "side": 1,
      "message": "wait for the ssh/node logic should be as part of a different task, the task above is the place to include it",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 26,
        "endChar": 17
      },
      "revId": "5bb0ef700254c650a61ca511ab7d200cc8816dd5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e200bb23_95139e51",
        "filename": "plugins/openstack/post.yml",
        "patchSetId": 4
      },
      "lineNbr": 26,
      "author": {
        "id": 1008329
      },
      "writtenOn": "2017-09-22T09:49:29Z",
      "side": 1,
      "message": "only if you insist, i could add a \"shell: true\" task that does this. The only benefit is that there it lowers the chance of regression if someone moves the current task to another place or removes it.",
      "parentUuid": "729da2fd_17f5651a",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 26,
        "endChar": 17
      },
      "revId": "5bb0ef700254c650a61ca511ab7d200cc8816dd5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "80e42b3d_36abc326",
        "filename": "plugins/openstack/tasks/servers.yml",
        "patchSetId": 4
      },
      "lineNbr": 36,
      "author": {
        "id": 1004788
      },
      "writtenOn": "2017-09-22T09:43:18Z",
      "side": 1,
      "message": "\"is not enough\" - how about explaining why? :)\n\nClearly, this plugin is not new and used over one year quite frequently. So is it another \"nice to have\" patch or do we have an actual issue?",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 47
      },
      "revId": "5bb0ef700254c650a61ca511ab7d200cc8816dd5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4fdfb330_2fea196a",
        "filename": "plugins/openstack/tasks/servers.yml",
        "patchSetId": 4
      },
      "lineNbr": 36,
      "author": {
        "id": 1008329
      },
      "writtenOn": "2017-09-22T09:51:59Z",
      "side": 1,
      "message": "You asked me not to post intranet links, I had several build failures exactly with this \"create instance\" timeout. When I checked the resources they were provisioned.",
      "parentUuid": "80e42b3d_36abc326",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 47
      },
      "revId": "5bb0ef700254c650a61ca511ab7d200cc8816dd5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e80dd21e_4d770861",
        "filename": "plugins/openstack/tasks/servers.yml",
        "patchSetId": 4
      },
      "lineNbr": 36,
      "author": {
        "id": 1004788
      },
      "writtenOn": "2017-09-22T09:54:15Z",
      "side": 1,
      "message": "You are avoiding the real question. I don\u0027t care about links, I didn\u0027t ask you for links.\n\nI ask you how we didn\u0027t have this issue for over one year and suddenly this is an issue? if you don\u0027t know, simply write \"I don\u0027t know\" and I will know this is a \"nice to have\" patch.\n\nThanks :)",
      "parentUuid": "4fdfb330_2fea196a",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 47
      },
      "revId": "5bb0ef700254c650a61ca511ab7d200cc8816dd5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}