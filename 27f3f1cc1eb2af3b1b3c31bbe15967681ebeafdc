{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6e6c47aa_ce660ee6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 28
      },
      "lineNbr": 0,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2022-06-14T09:49:52Z",
      "side": 1,
      "message": "I think the change, as it is, is trying to fix both the normal case, which uses the hardcoded baremetal_deployment.yaml template from the \u0027virt\u0027 templates, and the composable role case, but the latter case is not fully covered.\n\nFor example, the changes to plugins/tripleo-overcloud/composable_roles.yml and plugins/tripleo-overcloud/templates/composable_roles/overcloud_deploy.sh.j2  are not needed. That\u0027s the old composable role model, used up to 12, and should not be touched. The code which deals with the composable role case is under plugins/tripleo-overcloud/tripleo_roles.yml and plugins/tripleo-overcloud/templates/tripleo_roles/overcloud_deploy.sh.j2, which contains already the important changes. \n\nAlso, there is the addition of plugins/tripleo-overcloud/vars/deployment/files/composable_roles/network/nic-configs/compute-dvr.j2.j2, but unless the dynamic generator of baremetal_deployment.yaml is fixed to account for that special type, that network template is not going to be used. Instead, you should probably add the relevant if-s to the existing compute.j2.j2, but then please consider also the upcoming https://review.gerrithub.io/c/redhat-openstack/infrared/+/530083/.\n\nMy suggestion is to fix the composable role case, but either do this fully in this review or to split it in another review. Please don\u0027t forget about it: the long term plan is to remove the \u0027virt\u0027 case and use the dynamic generator of baremetal_deployment.yaml in all scenarios.",
      "revId": "27f3f1cc1eb2af3b1b3c31bbe15967681ebeafdc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5b97857_d8cd8e48",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 28
      },
      "lineNbr": 0,
      "author": {
        "id": 1019722
      },
      "writtenOn": "2022-06-14T12:04:45Z",
      "side": 1,
      "message": "Hey Luigi,\n\nSure, I have reverted those two files. Not sure why we would be keeping code around that only works with OSP12 to begin with though.\n\nRegarding the nic-config file. I\u0027m not overly attached to any particular method. My main objective is to ensure that Infrared related CI tests are no longer a blocker for OSP17 QA and release timelines. If the Infrared team would prefer to handle this some other way, I\u0027m happy to do this however you prefer.",
      "parentUuid": "6e6c47aa_ce660ee6",
      "revId": "27f3f1cc1eb2af3b1b3c31bbe15967681ebeafdc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4639c1e0_2919d564",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 28
      },
      "lineNbr": 0,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2022-06-14T12:13:53Z",
      "side": 1,
      "message": "... and what about plugins/tripleo-overcloud/vars/deployment/files/composable_roles/network/nic-configs/compute-dvr.j2.j2 ?",
      "parentUuid": "a5b97857_d8cd8e48",
      "revId": "27f3f1cc1eb2af3b1b3c31bbe15967681ebeafdc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "607d572b_78c930eb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 28
      },
      "lineNbr": 0,
      "author": {
        "id": 1019722
      },
      "writtenOn": "2022-06-14T12:49:47Z",
      "side": 1,
      "message": "I left this one unresolved while I run a deployment to test my templating. But I have pushed the patchset for you so that you can see what I\u0027m testing in the compute.j2.j2 file.",
      "parentUuid": "4639c1e0_2919d564",
      "revId": "27f3f1cc1eb2af3b1b3c31bbe15967681ebeafdc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c878bd4c_57eb0f88",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 28
      },
      "lineNbr": 0,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2022-07-11T08:39:26Z",
      "side": 1,
      "message": "My point is that if you don\u0027t change the",
      "parentUuid": "607d572b_78c930eb",
      "revId": "27f3f1cc1eb2af3b1b3c31bbe15967681ebeafdc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7f0b5611_ab5f0dcd",
        "filename": "plugins/tripleo-overcloud/vars/deployment/files/virt/network/baremetal_deployment.yaml.j2",
        "patchSetId": 28
      },
      "lineNbr": 162,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2022-06-14T09:49:52Z",
      "side": 1,
      "message": "there is already an if install.storage.backend \u003d\u003d \u0027swift\u0027 above, can\u0027t this be unified?",
      "revId": "27f3f1cc1eb2af3b1b3c31bbe15967681ebeafdc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eb2f07a8_52bcfd90",
        "filename": "plugins/tripleo-overcloud/vars/deployment/files/virt/network/baremetal_deployment.yaml.j2",
        "patchSetId": 28
      },
      "lineNbr": 162,
      "author": {
        "id": 1019722
      },
      "writtenOn": "2022-06-14T12:04:45Z",
      "side": 1,
      "message": "Yeah, you\u0027re probably right about this. I\u0027ll take another look.",
      "parentUuid": "7f0b5611_ab5f0dcd",
      "revId": "27f3f1cc1eb2af3b1b3c31bbe15967681ebeafdc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "587f46ec_6f2d8d0c",
        "filename": "plugins/tripleo-overcloud/vars/deployment/files/virt/network/baremetal_deployment.yaml.j2",
        "patchSetId": 28
      },
      "lineNbr": 162,
      "author": {
        "id": 1019722
      },
      "writtenOn": "2022-07-06T22:37:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "eb2f07a8_52bcfd90",
      "revId": "27f3f1cc1eb2af3b1b3c31bbe15967681ebeafdc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}