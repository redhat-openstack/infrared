{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f8cdd61f_1d37b4a6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1005097
      },
      "writtenOn": "2021-03-17T10:04:12Z",
      "side": 1,
      "message": "Output from https://rhos-ci-jenkins.lab.eng.tlv2.redhat.com/job/gate-infrared-tripleo-overcloud-osp16.1-ipv6/105/artifact/.sh/ir-tripleo-overcloud-install-introspect.log seem to be parsed correctly, +1 as imho changes to hypervisor can possibly affect everyone so lets get more eyes on this.",
      "revId": "8c5be03d8c8995e2c0cbfa3a11c45fc2650d2cd2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "68666a33_0c0613a4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1005097
      },
      "writtenOn": "2021-03-17T10:06:41Z",
      "side": 1,
      "message": "(FTR: diffed pre-change/post-change output of these 2 tasks here would imho help with reviewing faster, in case this is urgent)",
      "revId": "8c5be03d8c8995e2c0cbfa3a11c45fc2650d2cd2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "32ba55a6_4596b62f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1016895
      },
      "writtenOn": "2021-03-17T10:38:41Z",
      "side": 1,
      "message": "Good point. Notice the change in the \u0027arch\u0027 in the examples below. See the result from grep is \u0027x86_64\\nrequire\u0027.\n\n~~~~~~Before~~~~~~\n\nTASK [get information about vm\u0027s from hypervisor] ******************************\ntask path: /home/rhos-ci/jenkins/workspace/DFG-upgrades-ffu-16.2-from-13-composable1/infrared/plugins/tripleo-overcloud/hypervisor.yml:93\nSaturday 06 March 2021  21:56:04 +0000 (0:00:00.818)       0:03:13.018 ******** \nchanged: [undercloud-0 -\u003e osp-upgrade-06.lab.eng.brq.redhat.com] \u003d\u003e (item\u003dcomputehci-0) \u003d\u003e {\n    \"ansible_loop_var\": \"item\",\n    \"changed\": true,\n    \"cmd\": \"NODE_XML\u003d`virsh dumpxml computehci-0`\\ndisks_list\u003d$(virsh domblklist computehci-0  |    awk \u0027{ if(NR\u003e2 \u0026\u0026 $0 !~ /^ *$/) { d \u003d d \\\",\\\" \\\"\\\\\\\"\\\" $1 \\\"\\\\\\\"\\\" } } END { print \\\"[\\\" gensub(\\\"^,\\\",\\\"\\\",1,d) \\\"]\\\" }\u0027)\\necho \\\"{\\n    \u0027name\u0027: \u0027computehci-0\u0027,\\n    \u0027arch\u0027: \u0027`echo \\\"$NODE_XML\\\" | grep arch | cut -d\\\\\u0027 -f2`\u0027,\\n    \u0027memory_kibs\u0027: \u0027`echo \\\"$NODE_XML\\\" | grep currentMemory | cut -d\\\\\u003c -f2 | cut -d\\\\\u003e -f2`\u0027,\\n    \u0027mac\u0027: \u0027`for network_name in  data; do echo \\\"$NODE_XML\\\" | grep \\\\\u0027$network_name\\\\\u0027 -B 1 | grep mac | cut -d\\\\\u0027 -f2; done|grep -v ^$`\u0027,\\n    \u0027cpu\u0027: \u0027`echo \\\"$NODE_XML\\\" | grep vcpu | cut -d\\\\\u003c -f2 | cut -d\\\\\u003e -f2`\u0027,\\n    \u0027disk_bytes\u0027: \u0027`virsh domblkinfo computehci-0 vda | grep -e Capacity | cut -d\\\\: -f2 | xargs`\u0027,\\n    \u0027disks\u0027: \u0027${disks_list}\u0027,\\n}\\\"\\n\",\n    \"delta\": \"0:00:00.130960\",\n    \"end\": \"2021-03-06 21:56:04.599075\",\n    \"item\": \"computehci-0\",\n    \"rc\": 0,\n    \"start\": \"2021-03-06 21:56:04.468115\"\n}\n\nSTDOUT:\n\n{\n    \u0027name\u0027: \u0027computehci-0\u0027,\n    \u0027arch\u0027: \u0027x86_64\nrequire\u0027,\n    \u0027memory_kibs\u0027: \u002733554432\u0027,\n    \u0027mac\u0027: \u002752:54:00:3a:aa:4e\u0027,\n    \u0027cpu\u0027: \u00278\u0027,\n    \u0027disk_bytes\u0027: \u002721474836480\u0027,\n    \u0027disks\u0027: \u0027[\"vda\",\"vdb\",\"vdc\",\"vdd\",\"vde\",\"vdf\"]\u0027,\n}\n\n~~~~~~After~~~~~~\n\nTASK [get information about vm\u0027s from hypervisor] ******************************\ntask path: /home/rhos-ci/jenkins/workspace/gate-infrared-tripleo-overcloud-osp16.1-ipv6/infrared/plugins/tripleo-overcloud/hypervisor.yml:93\nTuesday 16 March 2021  16:18:37 +0000 (0:00:00.230)       0:05:30.319 ********* \nchanged: [undercloud-0 -\u003e titan74.lab.eng.tlv2.redhat.com] \u003d\u003e (item\u003dcompute-0) \u003d\u003e {\n    \"ansible_loop_var\": \"item\",\n    \"changed\": true,\n    \"cmd\": \"NODE_XML\u003d`virsh dumpxml compute-0`\\ndisks_list\u003d$(virsh domblklist compute-0  |    awk \u0027{ if(NR\u003e2 \u0026\u0026 $0 !~ /^ *$/) { d \u003d d \\\",\\\" \\\"\\\\\\\"\\\" $1 \\\"\\\\\\\"\\\" } } END { print \\\"[\\\" gensub(\\\"^,\\\",\\\"\\\",1,d) \\\"]\\\" }\u0027)\\necho \\\"{\\n    \u0027name\u0027: \u0027compute-0\u0027,\\n    \u0027arch\u0027: \u0027`echo \\\"$NODE_XML\\\" | xmllint --xpath \\\"string(/domain/os/type/@arch)\\\" -`\u0027,\\n    \u0027memory_kibs\u0027: \u0027`echo \\\"$NODE_XML\\\" | xmllint --xpath \\\"string(/domain/currentMemory)\\\" -`\u0027,\\n    \u0027mac\u0027: \u0027`for network_name in  data; do echo \\\"$NODE_XML\\\" | xmllint --xpath \\\"string(/domain/devices/interface[contains(source/@*, \u0027$network_name\u0027)]/mac/@address)\\\" -; done|grep -v ^$`\u0027,\\n    \u0027cpu\u0027: \u0027`echo \\\"$NODE_XML\\\" | xmllint --xpath \\\"string(/domain/vcpu)\\\" -`\u0027,\\n    \u0027disk_bytes\u0027: \u0027`virsh domblkinfo compute-0 vda | grep -e Capacity | cut -d\\\\: -f2 | xargs`\u0027,\\n    \u0027disks\u0027: \u0027${disks_list}\u0027,\\n}\\\"\\n\",\n    \"delta\": \"0:00:00.080132\",\n    \"end\": \"2021-03-16 16:18:38.139464\",\n    \"item\": \"compute-0\",\n    \"rc\": 0,\n    \"start\": \"2021-03-16 16:18:38.059332\"\n}\n\nSTDOUT:\n\n{\n    \u0027name\u0027: \u0027compute-0\u0027,\n    \u0027arch\u0027: \u0027x86_64\u0027,\n    \u0027memory_kibs\u0027: \u00278388608\u0027,\n    \u0027mac\u0027: \u002752:54:00:b0:45:f6\u0027,\n    \u0027cpu\u0027: \u00274\u0027,\n    \u0027disk_bytes\u0027: \u002753687091200\u0027,\n    \u0027disks\u0027: \u0027[\"vda\"]\u0027,\n}",
      "parentUuid": "68666a33_0c0613a4",
      "revId": "8c5be03d8c8995e2c0cbfa3a11c45fc2650d2cd2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f7192d87_ccab487c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2021-03-19T17:09:04Z",
      "side": 1,
      "message": "Common parser ++",
      "revId": "8c5be03d8c8995e2c0cbfa3a11c45fc2650d2cd2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}