{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "84a7ebdf_e022e9dc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1017622
      },
      "writtenOn": "2022-10-25T13:51:44Z",
      "side": 1,
      "message": "recheck",
      "revId": "62ef722c04bb4189bc9b66eb8bacab6d200b39aa",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d9239ee_da25883e",
        "filename": "plugins/tripleo-overcloud/files/generate_baremetal_deployment_from_roles_data.py",
        "patchSetId": 7
      },
      "lineNbr": 133,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2022-10-25T10:38:34Z",
      "side": 1,
      "message": "Now that this is a list, would this still work?",
      "revId": "62ef722c04bb4189bc9b66eb8bacab6d200b39aa",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47eac9fa_85d8d565",
        "filename": "plugins/tripleo-overcloud/files/generate_baremetal_deployment_from_roles_data.py",
        "patchSetId": 7
      },
      "lineNbr": 133,
      "author": {
        "id": 1017622
      },
      "writtenOn": "2022-10-25T10:40:24Z",
      "side": 1,
      "message": "it was always a list, wasn\u0027t it?\nself.ansible_playbook_dict is a dict\nself.ansible_playbook_dict[self.name] is a list\n\nAnyway, I\u0027ll run a d/s job to verify it.",
      "parentUuid": "3d9239ee_da25883e",
      "revId": "62ef722c04bb4189bc9b66eb8bacab6d200b39aa",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5d5d3d8b_ea6cc9ac",
        "filename": "plugins/tripleo-overcloud/files/generate_baremetal_deployment_from_roles_data.py",
        "patchSetId": 7
      },
      "lineNbr": 133,
      "author": {
        "id": 1017622
      },
      "writtenOn": "2022-10-25T17:41:48Z",
      "side": 1,
      "message": "The d/s composable-roles job passed with this patch and the playbooks were successfully applied.",
      "parentUuid": "47eac9fa_85d8d565",
      "revId": "62ef722c04bb4189bc9b66eb8bacab6d200b39aa",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "228b038e_3bbe43b1",
        "filename": "plugins/tripleo-overcloud/files/generate_baremetal_deployment_from_roles_data.py",
        "patchSetId": 7
      },
      "lineNbr": 133,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2022-10-25T18:05:06Z",
      "side": 1,
      "message": "I\u0027ve run a composable role job too and the changes don\u0027t affect the use case when the workaround is not applied.",
      "parentUuid": "5d5d3d8b_ea6cc9ac",
      "revId": "62ef722c04bb4189bc9b66eb8bacab6d200b39aa",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53b27a57_d2f704ec",
        "filename": "plugins/tripleo-overcloud/files/generate_baremetal_deployment_from_roles_data.py",
        "patchSetId": 7
      },
      "lineNbr": 208,
      "author": {
        "id": 1001189
      },
      "writtenOn": "2022-10-26T08:53:38Z",
      "side": 1,
      "message": "I\u0027m wondering if this works as expected ...\n\nI believe that `[] + \u0027string\u0027` considers second arg for the + of list as list too,\nresulting in something like:\n\n  a \u003d []\n  a +\u003d \u002712\u0027\n  a +\u003d \u002713\u0027\n  a # \u003d\u003d\u003e  [\u00271\u0027, \u00272\u0027, \u00271\u0027, \u00273\u0027]\n\nSo ansible_playbook_dict[role_name] will then hold concatenated loaded playbook files as list but splitted by each character?\n\nImho, it would have same effect if it would be kept just as string (\u003d \u0027\u0027) and appended into it with +\u003d (maybe always also append newline after it to ensure there is proper termination/delimiting of each/all playbooks accumulated there)?",
      "range": {
        "startLine": 208,
        "startChar": 48,
        "endLine": 208,
        "endChar": 52
      },
      "revId": "62ef722c04bb4189bc9b66eb8bacab6d200b39aa",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9aea51f6_6e3a8ee6",
        "filename": "plugins/tripleo-overcloud/files/generate_baremetal_deployment_from_roles_data.py",
        "patchSetId": 7
      },
      "lineNbr": 208,
      "author": {
        "id": 1001189
      },
      "writtenOn": "2022-10-26T08:59:14Z",
      "side": 1,
      "message": "Btw if final string is composed from ansible_playbook_dict[role_name] as \u0027\u0027.join(ansible_playbook_dict[role_name] even current way can work.\n\nIf it would be like \u0027\\n\u0027.join(...) then likely it should be `+\u003d [yaml.safe_load(apf)]` instead so that you add new element into that array (or using .append(yaml.safe_load(apf))).\n\nIn case it would be done as single string as i pointed to in prev comment, no join usage expected at the end.",
      "parentUuid": "53b27a57_d2f704ec",
      "range": {
        "startLine": 208,
        "startChar": 48,
        "endLine": 208,
        "endChar": 52
      },
      "revId": "62ef722c04bb4189bc9b66eb8bacab6d200b39aa",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ad153d31_acbe9c1f",
        "filename": "plugins/tripleo-overcloud/files/generate_baremetal_deployment_from_roles_data.py",
        "patchSetId": 7
      },
      "lineNbr": 208,
      "author": {
        "id": 1001189
      },
      "writtenOn": "2022-10-26T09:10:14Z",
      "side": 1,
      "message": "Ah, I was wrong - not sure why i assumed/expected file content as string is read here, yaml.safe_load returns object representation from the files - templates/sssd_selinux_workaround.yaml for ex defines list with one element so that will be returned here and correctly appended to the list inside ansible_playbook_dict[role_name].",
      "parentUuid": "9aea51f6_6e3a8ee6",
      "range": {
        "startLine": 208,
        "startChar": 48,
        "endLine": 208,
        "endChar": 52
      },
      "revId": "62ef722c04bb4189bc9b66eb8bacab6d200b39aa",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}