{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "be7515f0_2a31f08e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1019223
      },
      "writtenOn": "2022-02-08T18:45:32Z",
      "side": 1,
      "message": "Thank you John!\n\nTesting out this patch with this rhos-qe-jenkins job change: https://code.engineering.redhat.com/gerrit/c/rhos-qe-jenkins/+/309853\n\nHere is the first run of the job in staging: https://rhos-ci-staging-jenkins.lab.eng.tlv2.redhat.com/view/DFG/view/hardware_provisioning/view/rqci/job/DFG-hardware_provisioning-rqci-17.0_director-virthost-3cont_6comp_6ceph-yes_UC_SSL-yes_OC_SSL-ceph-ipv4-geneve-localregistry-spineleaf-predictableip/40\n\nThe initial-ceph.conf can be seen here: https://code.engineering.redhat.com/gerrit/c/rhos-infrared/+/309839",
      "revId": "70050f9cede0ec998870cd8d0be6ff53603438c4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4fab09d6_eb9735eb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003043
      },
      "writtenOn": "2022-02-09T08:40:00Z",
      "side": 1,
      "message": "experimental 17-small",
      "revId": "70050f9cede0ec998870cd8d0be6ff53603438c4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4125806e_50af7ba3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1019223
      },
      "writtenOn": "2022-02-09T13:22:24Z",
      "side": 1,
      "message": "The job run did in fact work with these changes. https://rhos-ci-staging-jenkins.lab.eng.tlv2.redhat.com/view/DFG/view/hardware_provisioning/view/rqci/job/DFG-hardware_provisioning-rqci-17.0_director-virthost-3cont_6comp_6ceph-yes_UC_SSL-yes_OC_SSL-ceph-ipv4-geneve-localregistry-spineleaf-predictableip/41\n\nThe OC install succeeded.  The failure is an issue later in the job which we were seeing before the ceph issue occurred.",
      "parentUuid": "be7515f0_2a31f08e",
      "revId": "70050f9cede0ec998870cd8d0be6ff53603438c4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dc3efe73_05330765",
        "filename": "plugins/tripleo-overcloud/build_templates.yml",
        "patchSetId": 1
      },
      "lineNbr": 153,
      "author": {
        "id": 1003043
      },
      "writtenOn": "2022-02-09T08:55:13Z",
      "side": 1,
      "message": "you may want to use template here, it possible at the undercloud stage start you do not have enough information to create a proper config, but you might be able to template the required variable here.",
      "revId": "70050f9cede0ec998870cd8d0be6ff53603438c4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6b0d4e95_e7865315",
        "filename": "plugins/tripleo-overcloud/build_templates.yml",
        "patchSetId": 1
      },
      "lineNbr": 153,
      "author": {
        "id": 1006992
      },
      "writtenOn": "2022-02-09T13:56:48Z",
      "side": 1,
      "message": "It is a design goal of this patch to not use a template.\n\nThis option is for people who have the knowledge of their environment to override the defaults of the ceph.conf. That\u0027s all.",
      "parentUuid": "dc3efe73_05330765",
      "revId": "70050f9cede0ec998870cd8d0be6ff53603438c4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b07a5e1c_c14953d0",
        "filename": "plugins/tripleo-overcloud/build_templates.yml",
        "patchSetId": 1
      },
      "lineNbr": 153,
      "author": {
        "id": 1003043
      },
      "writtenOn": "2022-02-10T11:28:24Z",
      "side": 1,
      "message": "As we discussed on IRC basic ceph.conf does not have anything interfere with template engine, anyway if nobody see what is it good for.. \n\nThe change is something like replacing the \u0027copy\u0027  with \u0027template\u0027 , unless ansible has some wired behavior here.\n\nLet\u0027s hope the copy module few usec faster than the template at least,\nunless you see other benefit of using copy.\n\nProbably know better how it will be used a year later .",
      "parentUuid": "6b0d4e95_e7865315",
      "revId": "70050f9cede0ec998870cd8d0be6ff53603438c4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6a2a950f_b4f20cfe",
        "filename": "plugins/tripleo-overcloud/deploy.yml",
        "patchSetId": 1
      },
      "lineNbr": 108,
      "author": {
        "id": 1003043
      },
      "writtenOn": "2022-02-09T08:55:13Z",
      "side": 1,
      "message": "it is possible, you just need pass a small one.\n\nTime consuming debug call without any templated variable.",
      "revId": "70050f9cede0ec998870cd8d0be6ff53603438c4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b0556b5e_4f4f93d5",
        "filename": "plugins/tripleo-overcloud/deploy.yml",
        "patchSetId": 1
      },
      "lineNbr": 108,
      "author": {
        "id": 1003043
      },
      "writtenOn": "2022-02-09T08:57:29Z",
      "side": 1,
      "message": "you may print text in a \u0027name:\u0027 , or leave comments.",
      "parentUuid": "6a2a950f_b4f20cfe",
      "revId": "70050f9cede0ec998870cd8d0be6ff53603438c4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df14e01c_ab6aa712",
        "filename": "plugins/tripleo-overcloud/deploy.yml",
        "patchSetId": 1
      },
      "lineNbr": 108,
      "author": {
        "id": 1006992
      },
      "writtenOn": "2022-02-09T13:56:48Z",
      "side": 1,
      "message": "\"possible\" vs what the system should be designed to support. I\u0027m stating that if you want to pass your own initial ceph conf then you don\u0027t get to use the \"small node config\" for now.\n\nI intended to delete lines 106-131 with a follow up stacked patch so that you can have both which can be merged as soon as the following is in the puddle:\n\n https://review.opendev.org/q/topic:bug%252F1958884-stable%252Fwallaby\n\nThat will replace the following workaround:\n\n https://review.gerrithub.io/c/redhat-openstack/infrared/+/532023\n \nI\u0027ll send that stacked patch in shortly to make it more clear.\n\nI suppose I\u0027ll delete this extra debug and just convert this to a comment.",
      "parentUuid": "b0556b5e_4f4f93d5",
      "revId": "70050f9cede0ec998870cd8d0be6ff53603438c4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "daa07b6b_1007dc6d",
        "filename": "plugins/tripleo-overcloud/deploy.yml",
        "patchSetId": 1
      },
      "lineNbr": 108,
      "author": {
        "id": 1006992
      },
      "writtenOn": "2022-02-09T17:40:35Z",
      "side": 1,
      "message": "Here\u0027s that patch https://review.gerrithub.io/c/redhat-openstack/infrared/+/532922",
      "parentUuid": "df14e01c_ab6aa712",
      "revId": "70050f9cede0ec998870cd8d0be6ff53603438c4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa05cce4_2e1abef3",
        "filename": "plugins/tripleo-overcloud/deploy.yml",
        "patchSetId": 1
      },
      "lineNbr": 132,
      "author": {
        "id": 1003043
      },
      "writtenOn": "2022-02-09T08:55:13Z",
      "side": 1,
      "message": "You should be able to know if the file is there without an extra play.",
      "revId": "70050f9cede0ec998870cd8d0be6ff53603438c4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6fe8db53_f743960e",
        "filename": "plugins/tripleo-overcloud/deploy.yml",
        "patchSetId": 1
      },
      "lineNbr": 132,
      "author": {
        "id": 1003043
      },
      "writtenOn": "2022-02-09T09:06:03Z",
      "side": 1,
      "message": "if the stat unavoidable, it might be called from the shell script.\nstat itself relative cheap, the ansible play around it makes expensive.",
      "parentUuid": "fa05cce4_2e1abef3",
      "revId": "70050f9cede0ec998870cd8d0be6ff53603438c4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54656aa8_69b0d74c",
        "filename": "plugins/tripleo-overcloud/deploy.yml",
        "patchSetId": 1
      },
      "lineNbr": 132,
      "author": {
        "id": 1006992
      },
      "writtenOn": "2022-02-09T13:56:48Z",
      "side": 1,
      "message": "It\u0027s not an extra play. It\u0027s an extra task.\n\nThere are two ways the initial conf file could get there. \n\n1. they deploy w/ \u003c 3 ceph nodes\n2. they used --ceph-initial-conf-file\n\nThe stat manages both cases and follows the same pattern as in this merged patch:\n\n https://review.gerrithub.io/c/redhat-openstack/infrared/+/531998\n \nIf you really think it\u0027s worth discussing, then please provide an example of how to detect in both cases. Don\u0027t just say \"you can know without the extra play\". Show me. If you\u0027re thinking a \"when: install.ceph.initial.conf.file\" then that won\u0027t cover both cases.",
      "parentUuid": "6fe8db53_f743960e",
      "revId": "70050f9cede0ec998870cd8d0be6ff53603438c4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "79004869_fc5af173",
        "filename": "plugins/tripleo-overcloud/deploy.yml",
        "patchSetId": 1
      },
      "lineNbr": 132,
      "author": {
        "id": 1003043
      },
      "writtenOn": "2022-02-10T11:28:24Z",
      "side": 1,
      "message": "You know it is task, so you are not now to ansible .\n\n\u0027initial_ceph_file.stat.exists\u0027 can be replaced with an expression.\nYou just said it is based on two terms, what you either rewired or wrote before.\n\nKind of the same operators like in python can be used.\n\nYou may use \u0027var\u0027 -s for helper expression, but ansible handles them as AnsibleString in most cases, so in template those might need a |bool filter.\n\nThe lists in when are AND -ed together.\n\nIf you are looking for less repeated ways , the set_facts can be used, but it is not cheap. The other way would be implementing custom extension in python (maybe lookup)   .\n\n\"If you really think it\u0027s worth discussing\"\nI still did not deiced plus or minus vote.",
      "parentUuid": "54656aa8_69b0d74c",
      "revId": "70050f9cede0ec998870cd8d0be6ff53603438c4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}