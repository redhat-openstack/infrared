parameters:
  ServiceNetMap:
    NeutronTenantNetwork: tenant
    CeilometerApiNetwork: internal_api
    MongoDbNetwork: internal_api
    CinderApiNetwork: internal_api
    CinderIscsiNetwork: storage
    GlanceApiNetwork: storage
    GlanceRegistryNetwork: internal_api
    KeystoneAdminApiNetwork: internal_api
    KeystonePublicApiNetwork: internal_api
    NeutronApiNetwork: internal_api
    HeatApiNetwork: internal_api
    NovaApiNetwork: internal_api
    NovaMetadataNetwork: internal_api
    NovaVncProxyNetwork: internal_api
    SwiftMgmtNetwork: storage_mgmt
    SwiftProxyNetwork: storage
    HorizonNetwork: internal_api
    MemcachedNetwork: internal_api
    RabbitMqNetwork: internal_api
    RedisNetwork: internal_api
    MysqlNetwork: internal_api
    CephClusterNetwork: storage_mgmt
    CephPublicNetwork: storage
    ControllerHostnameResolveNetwork: internal_api
    ComputeHostnameResolveNetwork: internal_api
    BlockStorageHostnameResolveNetwork: internal_api
    ObjectStorageHostnameResolveNetwork: internal_api
    CephStorageHostnameResolveNetwork: storage

parameter_defaults:
  ControlPlaneIP: {{ provisioner.topology.nodes.loadbalancer.network.plain.ip | ipaddr('address') }}
  ExternalNetworkVip: {{ provisioner.topology.nodes.loadbalancer.network.external.vip | ipaddr('address') }}
  InternalApiNetworkVip: {{ provisioner.topology.nodes.loadbalancer.network.internal_api.vip | ipaddr('address') }}
  StorageNetworkVip: {{ provisioner.topology.nodes.loadbalancer.network.storage.vip | ipaddr('address') }}
  StorageMgmtNetworkVip: {{ provisioner.topology.nodes.loadbalancer.network.storage_mgmnt.vip | ipaddr('address') }}
  ServiceVips:
    redis: {{ provisioner.topology.nodes.loadbalancer.network.redis.vip | ipaddr('address') }}
  ControllerIPs:
    external_cidr: "{{ provisioner.topology.nodes.loadbalancer.network.external.vip | ipaddr('prefix') }}"
    internal_api_cidr: "{{ provisioner.topology.nodes.loadbalancer.network.internal_api.vip | ipaddr('prefix') }}"
    storage_cidr: "{{ provisioner.topology.nodes.loadbalancer.network.storage.vip | ipaddr('prefix') }}"
    storage_mgmt_cidr: "{{ provisioner.topology.nodes.loadbalancer.network.storage_mgmnt.vip | ipaddr('prefix') }}"
    tenant_cidr: "{{ provisioner.topology.nodes.loadbalancer.network.tenant.vip | ipaddr('prefix') }}"
    external:
{% for x in range(provisioner.topology.nodes.controller.amount) %}
    - {{ provisioner.topology.nodes.loadbalancer.network.external.net | ipaddr('net') | ipaddr(provisioner.topology.nodes.loadbalancer.controllers.pool_start + x) | ipaddr('address') }}
{% endfor %}
    internal_api:
{% for x in range(provisioner.topology.nodes.controller.amount) %}
    - {{ provisioner.topology.nodes.loadbalancer.network.internal_api.net | ipaddr('net') | ipaddr(provisioner.topology.nodes.loadbalancer.controllers.pool_start + x) | ipaddr('address') }}
{% endfor %}
    storage:
{% for x in range(provisioner.topology.nodes.controller.amount) %}
    - {{ provisioner.topology.nodes.loadbalancer.network.storage.net | ipaddr('net') | ipaddr(provisioner.topology.nodes.loadbalancer.controllers.pool_start + x) | ipaddr('address') }}
{% endfor %}
    storage_mgmt:
{% for x in range(provisioner.topology.nodes.controller.amount) %}
    - {{ provisioner.topology.nodes.loadbalancer.network.storage_mgmnt.net | ipaddr('net') | ipaddr(provisioner.topology.nodes.loadbalancer.controllers.pool_start + x) | ipaddr('address') }}
{% endfor %}
    tenant:
{% for x in range(provisioner.topology.nodes.controller.amount) %}
    - {{ provisioner.topology.nodes.loadbalancer.network.tenant.net | ipaddr('net') | ipaddr(provisioner.topology.nodes.loadbalancer.controllers.pool_start + x) | ipaddr('address') }}
{% endfor %}