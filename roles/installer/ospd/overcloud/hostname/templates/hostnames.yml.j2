{#
    For more details see:
    http://docs.openstack.org/developer/tripleo-docs/advanced_deployment/node_placement.html
#}

parameter_defaults:
{% for node_type, details in node_types.iteritems() %}
{% if groups[node_type]|default([])|length %}
    {{ details.heat_name }}SchedulerHints:
        'capabilities:node': '{{ node_type }}-%index%'
{% endif %}
{% endfor %}

{% for node_type, details in node_types.iteritems() %}
    {{ details.heat_name }}HostnameFormat: '{{ node_type }}-%index%'
{% endfor %}

{% if installer.overcloud.hostname.HostnameMap | default(False) %}
        HostnameMap:
{% for old_name, new_name in installer.overcloud.hostname.HostnameMap.iteritems() %}
            {{ old_name }}: {{ new_name }}
{% endfor %}
{% endif %}

{# This template will override explict nodes. Not needed when usin HostnameFormat
    {% for node_type, details in node_types.iteritems() %}
    {% for node in groups[node_type]|default([]) %}
            overcloud-{{ details.ospd_hostname }}-{{ loop.index0 }}: {{ node }}
    {% endfor %}
    {% endfor %}
 #}
