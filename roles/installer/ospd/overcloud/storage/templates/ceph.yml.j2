parameter_defaults:
    CinderEnableIscsiBackend: false
    CinderEnableRbdBackend: true
    CinderEnableNfsBackend: false
    NovaEnableRbdBackend: true
    GlanceBackend: rbd
{% if installer.storage.external == "yes" %}
    CinderRbdPoolName: "automation-cinder"
    NovaRbdPoolName: "automation-nova"
    GlanceRbdPoolName: "automation-glance"
    CephClientUserName: "automation"
    CephClientKey: "{{ private.storage.ceph.CephClientKey }}"
    CephClusterFSID: "{{ private.storage.ceph.CephClusterFSID }}"
    CephExternalMonHost: "{{ private.storage.ceph.CephExternalMonHost }}"

resource_registry:
    OS::TripleO::CephClusterConfig::SoftwareConfig: /usr/share/openstack-tripleo-heat-templates/puppet/extraconfig/ceph/ceph-external-config.yaml

{% else %}
    GlanceBackend: rbd
    CinderRbdPoolName: "volumes"
    NovaRbdPoolName: "vms"
    GlanceRbdPoolName: "images"
    ExtraConfig:
      ceph::profile::params::osds:
{% for disk in provisioner.topology.nodes.ceph.disks.values()[1:] %}
       '{{ disk.dev }}':
           journal: ''
{% endfor %}
{% endif %}

