{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "befda957_c8c14b4c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2022-01-06T17:23:03Z",
      "side": 1,
      "message": "Doesn\u0027t this additional step already happen in some other cases? Couldn\u0027t the condition there be extended? I mean, if the problem is install.network.ovn|default(False), can\u0027t that be simply removed, or changed a bit so that it\u0027s considered only for \u003c 17?",
      "revId": "16cb44379f3099dab2c780af91c15c32a37a4118",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e43faab7_a1c71225",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1006223
      },
      "writtenOn": "2022-01-06T17:36:35Z",
      "side": 1,
      "message": "You only need to run openstack tripleo container image prepare prior to deploy in the case where you are running ceph deploy before overcloud install. By default the overcloud deploy process will run this at deployment time so this the condition is that this needs to be run before ceph deployment.  I\u0027m uncertain why the ovn conditional was ever used for this. It might have been to ensure they get the correct containers into the docker-images.yaml which shouldn\u0027t have been used since the `openstack tripleo container image prepare` went live in OSP14 (I think it was 14).",
      "parentUuid": "befda957_c8c14b4c",
      "revId": "16cb44379f3099dab2c780af91c15c32a37a4118",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e1aba776_10bba14f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1005097
      },
      "writtenOn": "2022-01-07T14:19:15Z",
      "side": 1,
      "message": "Unfortunately, also looking into git history, this is fine example of IR spaghetti-ness. Some job did not work, someone extended mentioned conditional for their use-case to make it work, others copied it, the details are lost in following refactorings, no comments anywhere in code on why... It is what it is - again, unfortunately.\n\nNo, imho \"install.network.ovn|default\" can\u0027t be removed same as any code potentially used by released OSP\u003c17s. As we have close to zero tooling on IR coverage in CI, any decision like that might potentially change behaviour of CI for released OSP unpredictably, again the same argument from https://review.gerrithub.io/c/redhat-openstack/infrared/+/527832 .\n\nI defer to Tuvya as the latest commit owner for related code to provide more insight, but all things considered, this seems to me like the right solution for this case.",
      "parentUuid": "e43faab7_a1c71225",
      "revId": "16cb44379f3099dab2c780af91c15c32a37a4118",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cfb74c8c_a69b31d9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1017127
      },
      "writtenOn": "2022-01-10T15:57:12Z",
      "side": 1,
      "message": "@Luigi are Alex/Filip\u0027s explanations sufficient for why the commit was purposed? Are there any other questions or concerns you would like addressed?",
      "parentUuid": "e1aba776_10bba14f",
      "revId": "16cb44379f3099dab2c780af91c15c32a37a4118",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d8010d5a_065c85ce",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2022-01-10T16:14:54Z",
      "side": 1,
      "message": "Thanks",
      "revId": "16cb44379f3099dab2c780af91c15c32a37a4118",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98a97d87_9676eeec",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2022-01-11T10:15:03Z",
      "side": 1,
      "message": "I thought a bit more about it and I\u0027m still not convinced, sorry.\n\nWe are going to have an existing path for every time networking.ovn is set for \u003e\u003d14. This works every time.\nNow we have a superspecial path in all other cases, but what are those cases? Just ovn? Why doesn\u0027t that work with ovn? I disagree with Filip - install.network.ovn can be removed, and it will probably work with older versions.\nWe are just adding more code paths which makes it more complicated to untangle stuff in the future.\n\nSo I\u0027m not going to block this, but not with my vote.",
      "parentUuid": "cfb74c8c_a69b31d9",
      "revId": "16cb44379f3099dab2c780af91c15c32a37a4118",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4fe9cf31_7937ec28",
        "filename": "plugins/tripleo-overcloud/roles/containers/prepare-templates/tasks/build/build_images.yml",
        "patchSetId": 1
      },
      "lineNbr": 135,
      "author": {
        "id": 1014217
      },
      "writtenOn": "2022-01-09T08:47:06Z",
      "side": 1,
      "message": "If release \u003e\u003d 14 it is also 17 for this condition ... I don\u0027t understand the condition for only ceph, if it was not appeared on the previous when condition for \"install.storage.backend... is ceph, meaning the previous when should also answer this condition?  \n\nAnyway if the condition is just for 17, so please put it at the beginning of the when block.",
      "revId": "16cb44379f3099dab2c780af91c15c32a37a4118",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "17e09664_42a35415",
        "filename": "plugins/tripleo-overcloud/roles/containers/prepare-templates/tasks/build/build_images.yml",
        "patchSetId": 1
      },
      "lineNbr": 135,
      "author": {
        "id": 1017127
      },
      "writtenOn": "2022-01-10T15:54:33Z",
      "side": 1,
      "message": "Yes correct if its RHOS 17 it already meets the 14 \u003e\u003d condition, but since the ceph deployment changes started with 17 this command is only required if the deployment is using ceph and its 17 or greater, when using ceph this task is not required for RHOS Versions between 14 and 16.x.\n\nI don\u0027t follow what needs to be changed here.  Do you want #L125 to change to \u003e\u003d 17 or do you want #L132 - #L136 moved to the top of the conditionals?  If it\u0027s the former the task conditional needs to remain 14 \u003e\u003d since there are other pre 17 jobs dependent on executing this task for other reasons outside of deploying ceph.",
      "parentUuid": "4fe9cf31_7937ec28",
      "revId": "16cb44379f3099dab2c780af91c15c32a37a4118",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}