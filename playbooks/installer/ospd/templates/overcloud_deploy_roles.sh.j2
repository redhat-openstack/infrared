source ~/stackrc
export THT=/usr/share/openstack-tripleo-heat-templates/

openstack overcloud deploy --templates $THT \
  -r {{ template_base  }}/roles_data.yaml \
{% if installer.network.protocol == 'ipv4' %}
  -e $THT/environments/network-isolation.yaml \
  -e {{ template_base }}/network/network-environment.yaml \
  -e {{ template_base }}/network/vips.yaml \
{% else %}
  -e $THT/environments/network-isolation-v6.yaml \
  -e {{ template_base }}/network/network-environment-v6.yaml \
  -e {{ template_base }}/network/vips-v6.yaml \
{% endif %}
  -e $THT/environments/network-management.yaml \
  -e $THT/environments/storage-environment.yaml \
  -e {{ template_base  }}/nodes.yaml \
  -e {{ template_base  }}/network-config.yaml \
  -e {{ template_base  }}/extra.yaml \
{% if installer.overcloud.debug %}
  -e {{ template_base  }}/debug.yaml \
{% endif %}
  -e {{ template_base  }}/hostnames.yml \
  --log-file overcloud_deployment.log &> overcloud_install.log
