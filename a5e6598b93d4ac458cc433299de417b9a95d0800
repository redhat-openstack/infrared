{
  "comments": [
    {
      "key": {
        "uuid": "3c95240b_541d0d48",
        "filename": "plugins/virsh/provision_user.yml",
        "patchSetId": 8
      },
      "lineNbr": 30,
      "author": {
        "id": 1009545
      },
      "writtenOn": "2019-01-22T13:05:02Z",
      "side": 1,
      "message": "I also needed to add the BaseOS repo",
      "revId": "a5e6598b93d4ac458cc433299de417b9a95d0800",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afbeb357_57c8af86",
        "filename": "plugins/virsh/provision_user.yml",
        "patchSetId": 8
      },
      "lineNbr": 30,
      "author": {
        "id": 1009441
      },
      "writtenOn": "2019-01-24T15:33:22Z",
      "side": 1,
      "message": "which rpms were needed from that repo?",
      "parentUuid": "3c95240b_541d0d48",
      "revId": "a5e6598b93d4ac458cc433299de417b9a95d0800",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4ec85c16_394a1af2",
        "filename": "plugins/virsh/provision_user.yml",
        "patchSetId": 8
      },
      "lineNbr": 40,
      "author": {
        "id": 1005418
      },
      "writtenOn": "2019-01-22T20:14:37Z",
      "side": 1,
      "message": "I think we should avoid setting up repos in the virsh plugin as they\u0027re covered by the undercloud plugin.\n\nThe image already has a python interpreter in /usr/libexec/platform-python so we could instead just symlink /usr/bin/python to it.",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 40,
        "endChar": 62
      },
      "revId": "a5e6598b93d4ac458cc433299de417b9a95d0800",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9b183698_7c36e7de",
        "filename": "plugins/virsh/provision_user.yml",
        "patchSetId": 8
      },
      "lineNbr": 40,
      "author": {
        "id": 1001189
      },
      "writtenOn": "2019-01-23T13:04:41Z",
      "side": 1,
      "message": "Agree with Marius here, do not touch repositories on provisioned nodes here, those depends later on product/tasks done later (and esp not any hardcoded internal and lab location scoped urls here anyway pls).\n\nAlthough i can understand it being here temporarily, as part of work-in-progress attempt on getting closer to solution.",
      "parentUuid": "4ec85c16_394a1af2",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 40,
        "endChar": 62
      },
      "revId": "a5e6598b93d4ac458cc433299de417b9a95d0800",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "716b8ac4_4eafbdff",
        "filename": "plugins/virsh/provision_user.yml",
        "patchSetId": 8
      },
      "lineNbr": 43,
      "author": {
        "id": 1005418
      },
      "writtenOn": "2019-01-22T20:14:37Z",
      "side": 1,
      "message": "I guesst replacing it with /usr/libexec/platform-python which comes as part of the image.",
      "range": {
        "startLine": 43,
        "startChar": 19,
        "endLine": 43,
        "endChar": 35
      },
      "revId": "a5e6598b93d4ac458cc433299de417b9a95d0800",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ffb2c1a_66ea809a",
        "filename": "plugins/virsh/provision_user.yml",
        "patchSetId": 8
      },
      "lineNbr": 43,
      "author": {
        "id": 1001189
      },
      "writtenOn": "2019-01-23T13:04:41Z",
      "side": 1,
      "message": "This might work, but do we need to even do such symlinks? What how fails ... couldn\u0027t we just use python from wherever it is location (either by modifying $PATH or maybe ansible_python_interpreter, conditionally of course)?",
      "parentUuid": "716b8ac4_4eafbdff",
      "range": {
        "startLine": 43,
        "startChar": 19,
        "endLine": 43,
        "endChar": 35
      },
      "revId": "a5e6598b93d4ac458cc433299de417b9a95d0800",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7e9b0a48_7ebfbabb",
        "filename": "plugins/virsh/provision_user.yml",
        "patchSetId": 8
      },
      "lineNbr": 43,
      "author": {
        "id": 1005418
      },
      "writtenOn": "2019-01-23T15:35:56Z",
      "side": 1,
      "message": "It fails with:\n\nfatal: [undercloud-0]: FAILED! \u003d\u003e {\"changed\": false, \"module_stderr\": \"Shared connection to 172.16.0.4 closed.\\r\\n\", \"module_stdout\": \"/bin/sh: /usr/bin/python: No such file or directory\\r\\n\", \"msg\": \"MODULE FAILURE\", \"rc\": 0}\n\n\nI agree the symlink is not ideal. Perhaps we can set the ansible_python_interpreter globally to /usr/libexec/platform-python(I see it\u0027s also available in rhel7 and centos). wdyt?",
      "parentUuid": "5ffb2c1a_66ea809a",
      "range": {
        "startLine": 43,
        "startChar": 19,
        "endLine": 43,
        "endChar": 35
      },
      "revId": "a5e6598b93d4ac458cc433299de417b9a95d0800",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "64b82666_c047ce46",
        "filename": "plugins/virsh/provision_user.yml",
        "patchSetId": 8
      },
      "lineNbr": 43,
      "author": {
        "id": 1009441
      },
      "writtenOn": "2019-01-24T15:33:22Z",
      "side": 1,
      "message": "That means everyone who uses Infrared will be needed to change ansible_python_interpreter parameter on his ansible env, so my question is - should this \"platform-python\" be the default python interpreter?\n\nwhat is the cost of creating a soft-link against telling everybody to change their default interpreter?",
      "parentUuid": "7e9b0a48_7ebfbabb",
      "range": {
        "startLine": 43,
        "startChar": 19,
        "endLine": 43,
        "endChar": 35
      },
      "revId": "a5e6598b93d4ac458cc433299de417b9a95d0800",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "268251e1_ba7f603c",
        "filename": "plugins/virsh/provision_vms.yml",
        "patchSetId": 8
      },
      "lineNbr": 28,
      "author": {
        "id": 1001189
      },
      "writtenOn": "2019-01-23T13:04:41Z",
      "side": 1,
      "message": "I\u0027m wondering what will be done if we ever need to use different/newer version than 1.38 ...\nmaybe condition and target dir could be with including version? (And just have symlink for not having to hardcode version in any other file than this one)\n\nsomething in style of pseudocode like:\n\n  if not /opt/appliance-1.38:\n     get 1.38.tar.xz\n     unpack 1.38.tar.xz to /opt/appliance-1.38/\n     ln -snf /opt/appliance-1.38 /opt/appliance\n\n\npotentially whole shell step having creates condition as\n\n  - name: ...\n    shell: |\n        ...\n    args:\n        creates: /opt/appliance-1.38",
      "revId": "a5e6598b93d4ac458cc433299de417b9a95d0800",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b5641f2b_f7f5fbc8",
        "filename": "plugins/virsh/provision_vms.yml",
        "patchSetId": 8
      },
      "lineNbr": 28,
      "author": {
        "id": 1009441
      },
      "writtenOn": "2019-01-24T15:33:22Z",
      "side": 1,
      "message": "I am not sure if I got this.\nas we already have libguestfs v-1.32, and doing this to get v-1.38, it sounds reasonable to update in the same way in the future if we will need to do so for some reason.",
      "parentUuid": "268251e1_ba7f603c",
      "revId": "a5e6598b93d4ac458cc433299de417b9a95d0800",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c3e82ad_a70e6380",
        "filename": "plugins/virsh/tasks/vms_1_create_disk.yml",
        "patchSetId": 8
      },
      "lineNbr": 66,
      "author": {
        "id": 1010849
      },
      "writtenOn": "2019-01-22T18:38:54Z",
      "side": 1,
      "message": "why we change sda3 -\u003e sda1?\n\nin undercloud we getting changed /boot instead of /\n[root@localhost ~]# df -h\nFilesystem      Size  Used Avail Use% Mounted on\ndevtmpfs         12G     0   12G   0% /dev\ntmpfs            12G     0   12G   0% /dev/shm\ntmpfs            12G   17M   12G   1% /run\ntmpfs            12G     0   12G   0% /sys/fs/cgroup\n/dev/vda3       8.0G  1.1G  7.0G  14% /\n/dev/vda1        91G  812M   91G   1% /boot\ntmpfs           2.4G     0  2.4G   0% /run/user/0",
      "range": {
        "startLine": 66,
        "startChar": 41,
        "endLine": 66,
        "endChar": 43
      },
      "revId": "a5e6598b93d4ac458cc433299de417b9a95d0800",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4267c700_5b9774e5",
        "filename": "plugins/virsh/tasks/vms_1_create_disk.yml",
        "patchSetId": 8
      },
      "lineNbr": 66,
      "author": {
        "id": 1005418
      },
      "writtenOn": "2019-01-23T15:35:56Z",
      "side": 1,
      "message": "On rhel7 image we have the / partition on sda1 while on rhel8 we have it on sda3. We could detect the rhel version inside the image with something like:\n\nvirt-cat -a /var/lib/libvirt/images/rhel-guest-image-8.0-1690.x86_64.qcow2 /etc/os-release | awk \u0027/^VERSION\u003d/ {print $1}\u0027 | grep -oP \u0027[0-9]+\u0027 | head -1",
      "parentUuid": "5c3e82ad_a70e6380",
      "range": {
        "startLine": 66,
        "startChar": 41,
        "endLine": 66,
        "endChar": 43
      },
      "revId": "a5e6598b93d4ac458cc433299de417b9a95d0800",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e02b26e8_a00b2b6a",
        "filename": "plugins/virsh/tasks/vms_1_create_disk.yml",
        "patchSetId": 8
      },
      "lineNbr": 66,
      "author": {
        "id": 1009441
      },
      "writtenOn": "2019-01-24T15:33:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4267c700_5b9774e5",
      "range": {
        "startLine": 66,
        "startChar": 41,
        "endLine": 66,
        "endChar": 43
      },
      "revId": "a5e6598b93d4ac458cc433299de417b9a95d0800",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}