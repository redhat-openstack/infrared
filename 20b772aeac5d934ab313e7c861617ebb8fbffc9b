{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1b1ca282_370a06bf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2022-03-04T16:06:23Z",
      "side": 1,
      "message": "I see what it does, I don\u0027t understand the use case.\n\nIf you want to run different directories, you should run call tempest plugin separately.\n\nPlease let\u0027s discuss about this.",
      "revId": "20b772aeac5d934ab313e7c861617ebb8fbffc9b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b39c0027_3b793d80",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1017622
      },
      "writtenOn": "2022-03-04T16:28:03Z",
      "side": 1,
      "message": "Hi Luigi,\n\nIn some d/s CI jobs, the tempest stage runs more than one test suite. Example: \n--tests neutron,neutron_single_threaded used by default in the job \"DFG-network-networking-ovn-16.1_director-rhel-virthost-3cont_2comp-ipv4-geneve-gate-ovn\"\n\nYou are familiar with this because most of the unified jobs run several suites.\n\n\nIn our case, we want to run the neutron and neutron_single_threaded suites with different compute-feature-enabled.console_output values (True for neutron, False for neutron_single_threaded).\nWe have a simple solution for this available: run two tempest stages in these jobs.\nEach tempest stage repeats the same tasks (download tempest image, create tempest config, check everything is installed, etc), consuming too much time.\n\nWe think this is a better solution to resolve our problem.\n\nLet me know if it is not clear yet.\n\nPS: you mentioned directories, but this patch is not about different directories, it just replaces a config option from ~/tempest-dir/etc/tempest.conf",
      "parentUuid": "1b1ca282_370a06bf",
      "revId": "20b772aeac5d934ab313e7c861617ebb8fbffc9b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fb3f9127_c27bcbaa",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2022-03-04T16:49:56Z",
      "side": 1,
      "message": "I see, but I think it introduces a fragile special condition which works just for one of the many test suites.\nHow would you do this? Calling tempest run twice in the same block of code? That would be another special case.\n\nI believe the time spent for the tempest initialization is usually negligible compared to the time spent running the tests, and we may simplify it a bit in case to cut down some time (for example checking if the images are already downloaded).\n\nSo I don\u0027t think the change is needed.",
      "parentUuid": "b39c0027_3b793d80",
      "revId": "20b772aeac5d934ab313e7c861617ebb8fbffc9b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "85841591_6ee7a434",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1017622
      },
      "writtenOn": "2022-03-07T15:22:21Z",
      "side": 1,
      "message": "\u003e I see, but I think it introduces a fragile special condition which works just for one of the many test suites.\nI don\u0027t see why the change is fragile. The new parameter is optional and nothing changes for those suites not using it; and the original tempest.conf is restored after the suite is executed.\n\n\u003e How would you do this? Calling tempest run twice in the same block of code? That would be another special case.\nI don\u0027t understand these questions. For example, this is how it would work with \"--test neutron,neutron_single_threaded\"\n1) The tempest.conf is created before the suites are run.\n2) The neutron suite is run with \u0027tempest run\u0027. It doesn\u0027t include the new parameter, so it uses the original tempest.conf\n3) The neutron_single_threaded includes the new param, so tempest.conf is modified; then, the suite is executed with tempest run; finally, the original tempest.conf is restored\n\n\u003e \n\u003e I believe the time spent for the tempest initialization is usually negligible compared to the time spent running the tests, and we may simplify it a bit in case to cut down some time (for example checking if the images are already downloaded).\nI checked the time spent by the tempest stage before the tests are executed and it is about 6 min. It\u0027s much lower than the tempest run time. I agree with you on this.\n\n\u003e \n\u003e So I don\u0027t think the change is needed.\nThe alternative to this change is modifying many networking CI jobs with: 1) adding the second tempest stage; 2) duplicating the ir_tempest_run_override_options to maintain a set of tempest config values per suite.\nI really think this patch is better solution than the alternative.",
      "parentUuid": "fb3f9127_c27bcbaa",
      "revId": "20b772aeac5d934ab313e7c861617ebb8fbffc9b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}