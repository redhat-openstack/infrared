---
networks:
    net1:
      external_connectivity: no
      name: data
      forward: bridge
      virtualport_type: openvswitch
      ipv6_address: 2001:DB80:1::/64 # A foo address so NetworkManager keep iface up ...
      portgroups:
        - name: ctlplane1
          default: true
          vlan_id: 5
          # ipv4_address: 192.168.24.254
          # ipv6_address: 2620:dead:beef:5::f:ff/64
        # - name: ctlplane2
        #   default: true
        #   vlan_id: 6
        #   ipv4_address: 192.168.25.254
        #   ipv6_address: 2620:dead:beef:6::f:ff/64
        - name: trunk
          default: false
          trunk: true
          vlans:
            - id: 20
              # ipv4_address: 192.168.20.254/24
              # ipv6_address: 2620:dead:beef:20::1:ff/64
            - id: 30
              # ipv4_address: 192.168.30.254/24
              # ipv6_address: 2620:dead:beef:30::1:ff/64
            - id: 40
              # ipv4_address: 192.168.40.254/24
              # ipv6_address: 2620:dead:beef:40::1:ff/64
            - id: 50
              # ipv4_address: 192.168.50.254/24
              # ipv6_address: 2620:dead:beef:50::1:ff/64
            - id: 60
              # ipv4_address: 192.168.60.254/24
              # ipv6_address: 2620:dead:beef:60::1:ff/64
    net2:
      external_connectivity: yes
      name: management
      ip_address: "172.16.{{ net }}.1"
      netmask: "255.255.255.0"
      forward: nat
      dhcp:
        range:
          start: "172.16.{{ net }}.2"
          end: "172.16.{{ net }}.100"
        subnet_cidr: "172.16.{{ net }}.0/24"
        subnet_gateway: "172.16.{{ net }}.1"
      floating_ip:
        start: "172.16.{{ net }}.101"
        end: "172.16.{{ net }}.150"

nodes:
    default:
        interfaces:
            - network: data
              portgroup: ctlplane1
            - network: management
            - network: data
              portgroup: trunk
        external_network:
            network: management

