- block:
    - name: load the node topology file
      find:
          patterns: "{{ name }}.yml"
          paths:
              # search here first
              - vars/topology/nodes
              # search here later
              - defaults/topology/nodes
      register: topology_file
      delegate_to: localhost

    # save current node to "{{ node_dict }}"
    - include_vars: "{{ topology_file.files[0].path }}"

    - set_fact:
          nodes: "{{ nodes|default([]) + [node_dict] }}"
  vars:
      name: "{{ node.key }}"
      amount: "{{ node.value }}"
