---
tripleo_heat_templates:
{% if (install.version | default(undercloud_version) | openstack_release == 12)  %}
    - "{{ install.heat.templates.basedir }}/environments/services-docker/ironic.yaml"
{% elif (install.version | default(undercloud_version) | openstack_release < 15) %}
    - "{{ install.heat.templates.basedir }}/environments/services/ironic.yaml"
{% else %}
    - "{{ install.heat.templates.basedir }}/environments/services/ironic-overcloud.yaml"
{% endif %}

custom_templates:
  parameter_defaults:
    NeutronBridgeMappings: datacentre:br-ex,baremetal:br-baremetal
    NeutronFlatNetworks: datacentre,baremetal
    IronicCleaningNetwork: baremetal
    IronicEnabledDrivers:
        - pxe_ipmitool
        - fake
    NovaSchedulerDefaultFilters:
        - RetryFilter
        - AggregateInstanceExtraSpecsFilter
        - AvailabilityZoneFilter
        - RamFilter
        - DiskFilter
        - ComputeFilter
        - ComputeCapabilitiesFilter
        - ImagePropertiesFilter
    IronicCleaningDiskErase: metadata
    IronicIPXEEnabled: true
    ControllerExtraConfig:
        ironic::drivers::ssh::libvirt_uri: 'qemu:///system'
