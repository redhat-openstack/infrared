# three-nics-vlans
# v2 config

resource_registry:
    OS::TripleO::Controller::Net::SoftwareConfig: OS::Heat::None
    OS::TripleO::Compute::Net::SoftwareConfig: OS::Heat::None
    OS::TripleO::BlockStorage::Net::SoftwareConfig: OS::Heat::None
    OS::TripleO::ObjectStorage::Net::SoftwareConfig: OS::Heat::None
    OS::TripleO::CephStorage::Net::SoftwareConfig: OS::Heat::None
    OS::TripleO::ControllerOpenstack::Net::SoftwareConfig: OS::Heat::None
    OS::TripleO::Database::Net::SoftwareConfig: OS::Heat::None
    OS::TripleO::ComputeInstanceHA::Net::SoftwareConfig: OS::Heat::None
    OS::TripleO::Messaging::Net::SoftwareConfig: OS::Heat::None
    OS::TripleO::Networker::Net::SoftwareConfig: OS::Heat::None

parameter_defaults:
    ControllerNetworkConfigTemplate: '/home/stack/virt/network/three-nics-vlans/controller.j2'
    ComputeNetworkConfigTemplate: '/home/stack/virt/network/three-nics-vlans/compute.j2'
    BlockStorageNetworkConfigTemplate: '/home/stack/virt/network/three-nics-vlans/cinder-storage.j2'
    ObjectStorageNetworkConfigTemplate: '/home/stack/virt/network/templates/three-nics-vlans/swift-storage.j2'
    CephStorageNetworkConfigTemplate: '/home/stack/virt/network/three-nics-vlans/ceph-storage.j2'
    ControllerOpenstackNetworkConfigTemplate: '/home/stack/virt/network/three-nics-vlans/controller.j2'
    DatabaseNetworkConfigTemplate: '/home/stack/virt/network/three-nics-vlans/database.j2'
    MessagingNetworkConfigTemplate: '/home/stack/virt/network/three-nics-vlans/messaging.j2'
    ComputeInstanceHANetworkConfigTemplate: '/home/stack/virt/network/three-nics-vlans/compute.j2'
    NetworkerNetworkConfigTemplate: '/home/stack/virt/network/three-nics-vlans/networker.j2'
{% if install.network.dvr %}
    NeutronExternalNetworkBridge: "br-ex"
{% else %}
    NeutronExternalNetworkBridge: ""
{% endif %}
{% if install.version|openstack_release > 14 and not install.network.dvr and not install.network.ovs %}
    ControllerParameters:
      NeutronBridgeMappings: "datacentre:br-ex,tenant:br-isolated"
    ComputeParameters:
      NeutronBridgeMappings: ""
{% else %}
    NeutronBridgeMappings: "datacentre:br-ex,tenant:br-isolated"
{% endif %}
    NeutronNetworkVLANRanges: "tenant:1000:2000"
