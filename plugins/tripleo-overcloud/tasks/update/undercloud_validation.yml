---
- name: Unsupported OS version on undercloud
  fail:
      msg: "InfraRed supports updates for OpenStack versions 10 and 11"
  when:
      - not (undercloud_version == "10")
      - not (undercloud_version == "11")

- name: Checking overcloud_deploy_file
  stat:
      path: "~/overcloud_deploy.sh"
  register: overcloud_deploy_file

- name: Deployment script not found
  fail:
      msg: "Overcloud deployment script not found. Expected path: ~/overcloud_deploy.sh "
  when: not overcloud_deploy_file.stat.exists or not overcloud_deploy_file.stat.executable
