# We currently only support external netapp
- block:
      - name: Copy storage configuration file to the remote
        copy:
            src: "{{ install.storage.config }}"
            # force "yaml" suffix on file
            dest: "{{ template_base }}/{{ install.storage.config | basename | splitext | first }}.yaml"
        register: copied_config

      - name: Append the storage configuration line to the base overcloud deploy script
        lineinfile:
            dest: "~/overcloud_deploy.sh"
            line: '-e {{ copied_config.dest }} \'

  when: install.storage.external
