cinder_role:
    name: BlockStorage

    resource_registry:
        "OS::TripleO::ObjectStorage::Net::SoftwareConfig": "${deployment_dir}/network/nic-configs/${nics_subfolder}/cinder-storage.yaml"

    flavor: cinder
    networks:
        - InternalApi
        - Storage
        - StorageMgmt
    host_name_format: 'cinder-%index%'

    options:
        - "{% if install.version|default(undercloud_version)|openstack_release == 11 %}disable_upgrade_deployment: True{% endif %}"
        - uses_deprecated_params: True

    services:
        - "{% if install.version|default(undercloud_version) |openstack_release > 12 %}OS::TripleO::Services::Aide{% endif %}"
        - "{% if install.version|default(undercloud_version) |openstack_release > 12 %}OS::TripleO::Services::AuditD{% endif %}"
        - OS::TripleO::Services::CACerts
        - "{% if install.version|default(undercloud_version) |openstack_release > 11 %}OS::TripleO::Services::CertmongerUser{% endif %}"
        - "{% if install.version|default(undercloud_version) |openstack_release > 12 %}OS::TripleO::Services::Collectd{% endif %}"
        - "{% if install.version|default(undercloud_version) |openstack_release > 11 %}OS::TripleO::Services::Docker{% endif %}"
        - OS::TripleO::Services::Fluentd{% if install.version|default(undercloud_version) |openstack_release < 13 %}Client{% endif %}
        - "{% if install.version|default(undercloud_version) |openstack_release > 12 %}OS::TripleO::Services::Ipsec{% endif %}"
        - OS::TripleO::Services::Kernel
        - "{% if install.version|default(undercloud_version) |openstack_release > 12 %}OS::TripleO::Services::LoginDefs{% endif %}"
        - "{% if install.version|default(undercloud_version) |openstack_release > 10 %}OS::TripleO::Services::MySQLClient{% endif %}"
        - OS::TripleO::Services::Ntp
        - "{% if install.version|default(undercloud_version) |openstack_release > 11 %}OS::TripleO::Services::ContainersLogrotateCrond{% endif %}"
        - "{% if install.version|default(undercloud_version) |openstack_release > 12 %}OS::TripleO::Services::Rhsm{% endif %}"
        - "{% if install.version|default(undercloud_version) |openstack_release > 12 %}OS::TripleO::Services::RsyslogSidecar{% endif %}"
        - "{% if install.version|default(undercloud_version) |openstack_release > 11 %}OS::TripleO::Services::Securetty{% endif %}"
        - OS::TripleO::Services::SensuClient
        - OS::TripleO::Services::Snmp
        - "{% if roles_sshd %}OS::TripleO::Services::Sshd{% endif %}"
        - OS::TripleO::Services::BlockStorageCinderVolume
        - OS::TripleO::Services::CinderBackendVRTSHyperScale
        - OS::TripleO::Services::Timezone
        - OS::TripleO::Services::TripleoFirewall
        - OS::TripleO::Services::TripleoPackages
        - "{% if install.version|default(undercloud_version) |openstack_release > 11 %}OS::TripleO::Services::Tuned{% endif %}"
