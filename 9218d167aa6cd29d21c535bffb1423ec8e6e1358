{
  "comments": [
    {
      "key": {
        "uuid": "ac1ca292_dec9dc94",
        "filename": "plugins/tripleo-undercloud/templates/undercloud.conf.j2",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1011919
      },
      "writtenOn": "2019-04-01T14:16:39Z",
      "side": 1,
      "message": "I was planning initially on doing something similar, however it would imply creating a new parameter for tripleo-undercloud to specify that we\u0027re deploying with ovb (something similar to the one from tripleo-overcloud --deployment-files ovb) mainly because the 1350 mtu is needed only when we deploy with ovb, if not we might be using the normal 1500. The second comment is that this variable ovb_mtu_value belongs to the tripleo-overcloud plugin, so unless we pass it specifically via tripleo-undercloud -e ovb_mtu_value\u003d1500 we\u0027ll be always forcing the deployment with a local_mtu\u003d1350, which might break other CI jobs. So, far, the way I managed to do this was passing --config-options: ir tripleo-undercloud -v --version 14 --images-task rpm --config-options DEFAULT.local_mtu\u003d1350",
      "revId": "9218d167aa6cd29d21c535bffb1423ec8e6e1358",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e38de996_8834b291",
        "filename": "plugins/tripleo-undercloud/templates/undercloud.conf.j2",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2019-04-02T11:03:20Z",
      "side": 1,
      "message": "We don\u0027t always use 1350, see the condition on line 4, which still applies on line 7 -- that\u0027s a check whether we deploy OVB or not. So normal deployments will keep whatever they have by default (1500 i guess).\n\n\nA theoretical issue is hardcoding of the 1350 value for OVB, but it\u0027s not hardcoded here, it\u0027s only hardcoded here i think:\n\nhttps://github.com/redhat-openstack/infrared/blob/939e2155a857f52f30d174a480de73c43797b5a5/plugins/tripleo-overcloud/ovb.yml#L10\n\n^ that is probably a location which needs fixing. If we pass custom ovb_mtu_value, the spot in this patch will honor it, but the spot i linked above will override it. So something to fix, but not in this patch maybe?\n\nIMO we can safely merge this? And then perhaps parametrize the 1350 correctly in the spot i linked, but it\u0027s very unlikely that we\u0027ll want to customize that value on OVB i think... I\u0027m not even sure if it\u0027s worth exposing as a plugin parameter...",
      "parentUuid": "ac1ca292_dec9dc94",
      "revId": "9218d167aa6cd29d21c535bffb1423ec8e6e1358",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2065940e_eedfab9e",
        "filename": "plugins/tripleo-undercloud/templates/undercloud.conf.j2",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1011919
      },
      "writtenOn": "2019-04-02T14:42:34Z",
      "side": 1,
      "message": "Thanks for clarifying that, I totally missed the condition in line 4, I was understanding that this would apply to every single undercloud deployment. I\u0027ll +1 it right away.",
      "parentUuid": "e38de996_8834b291",
      "revId": "9218d167aa6cd29d21c535bffb1423ec8e6e1358",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}